
<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from esppt.bekasikota.go.id/esppt/views/pbbpay by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 11 Feb 2025 06:47:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <!-- <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> -->

  <title>E-SPPT | KOTA BEKASI</title>

  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="login/assets/img/logo.png" rel="icon">
  <link href="login/assets/img/logo.png" rel="apple-touch-icon">
  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet" type="text/css">

    <link href="../../../unicons.iconscout.com/release/v4.0.0/css/line.css" rel="stylesheet"  type="text/css"/>

<!-- ================== END core-css ================== -->
<script type="text/javascript" src="../assets/js/global_function.js"></script>

  <!-- Vendor CSS Files -->
  <link href="login/assets/vendor/aos/aos.css" rel="stylesheet">
  <!-- <link href="http://esppt.bekasikota.go.id/esppt/views/login/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"> -->
  <link href="login/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="login/assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="login/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="login/assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="login/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="login/assets/css/sppt_style.css" rel="stylesheet">

  <link href="../assets/plugins/datatables.net-bs5/css/dataTables.bootstrap5.min.css" rel="stylesheet" type="text/css" />
<link href="../assets/plugins/datatables.net-buttons-bs5/css/buttons.bootstrap5.min.css" rel="stylesheet" type="text/css" />
<link href="../assets/plugins/datatables.net-responsive-bs5/css/responsive.bootstrap5.min.css" rel="stylesheet" type="text/css" /> 
<link rel="stylesheet" href="sinetron/assets/css/preloader.min.css" type="text/css" />
<link href="../assets/plugins/bootstrap/dist/css/bootstrap.min.css" id="bootstrap-style" rel="stylesheet" type="text/css" />
<link  href="sinetron/assets/css/particlesjs.css" rel="stylesheet" type="text/css" />
<link href="../assets/bootstrap/plugins/sweetalert2/sweetalert2.min.css" rel="stylesheet" />

<link rel="stylesheet" href="../assets/css/normalize.min.css">

<!-- ================== BEGIN core-css ================== -->
<!-- <link href="http://esppt.bekasikota.go.id/esppt/assets/css/vendor.min.css" rel="stylesheet" />
<link href="http://esppt.bekasikota.go.id/esppt/assets/css/default/app.min.css" rel="stylesheet" /> -->



  <!-- =======================================================
  * Template Name: OnePage
  * Template URL: https://bootstrapmade.com/onepage-multipurpose-bootstrap-template/
  * Updated: Mar 17 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top">
    <div class="container d-flex align-items-center justify-content-between">

      <h1 class="logo"><a href="index.html"><img src="login/assets/img/bekasi_header.png" alt="" class="img-fluid"></a></h1>
      <!-- Uncomment below if you prefer to use an image logo -->
      <nav id="navbar" class="navbar">
        <!-- <a href="#" class="getstarted" id="form-open">Daftar</a> -->
        <a href="http://esppt.bekasikota.go.id/esppt/" class="getstarted button">HOME</a>
      </nav><!-- .navbar -->
    </div>
  </header><!-- End Header -->

  <!-- ======= Hero Section ======= -->
  <section id="hero" class="d-flex align-items-start hero">
    <div class="container position-relative" data-aos="fade-up" data-aos-delay="100">
      <div class="row justify-content-center">
        <div class="col-xl-7 col-lg-9 text-center">
          <h1>e-SPPT KOTA BEKASI</h1>
          <!-- <h2>CEK DAN  PEMBAYARAN PAJAK BUMI DAN BANGUNAN</h2> -->
        </div>
      </div> 
      <div id="layout-wrapper">
             <div class="main-content">
                <div class="page-content">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="card" style="background-color:rgba(255,255,255,.95);border-radius:0.85rem;">
                                    <div class="card-header" style="border-radius:0.85rem;">
                                        <h4 class="card-title">Cek dan Bayar Pajak Bumi dan Bangunan (PBB)</h4>
                                        <p class="card-title-desc">Untuk mengetahui informasi pajak terutang, silakan masukkan Nomor Objek Pajak (NOP)!</p>
                                    </div>
                                    <div class="card-body">
                                        <div class="row ceknop">
                                            <div class="col-lg-4">
                                                <div class="mb-3">
                                                    <label class="form-label" for="userpassword">Nomor Objek Pajak (NOP)</label>
                                                    <input type="text" inputmode="numeric" pattern="[0-9]*" class="form-control" name="usernop" id="usernop" placeholder="Masukkan NOP">
                                                </div>
                                                <div class="mb-3 mt-4">
                                                    <button type="button" id="ceksekarang" class="btn   btn-dark text-white w-100">Cek Sekarang</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row datanotfound" style="display:none;">
                                            <div class="alert alert-danger" role="alert">
                                                data not found!
                                            </div>
                                        </div>
                                        <div class="row datapajak" style="display:none;">
                                            <div class="col-xl-6">
                                                <div>
                                                    <blockquote class="blockquote font-size-14 mb-0" id="dataapi1">
                                                    </blockquote>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row datapajak" style="display:none;">
                                            <table id="datatable" class="table table-bordered dt-responsive  nowrap w-100">
                                                <thead>
                                                <tr>
                                                    <th>Tahun SPPT</th>
                                                    <th>Pajak Terutang</th>
                                                    <th>Denda</th>
                                                    <th>Total Tagihan</th>
                                                    <th>Status</th>
                                                    <th>Aksi</th>
                                                </tr>
                                                </thead>
            
                                                <tbody>
                                                </tbody>
                                            </table>
                                        </div>

                                        <!-- default offcanvas -->
                                        <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
                                            <div class="offcanvas-header">
                                                <h5 class="offcanvas-title" id="offcanvasExampleLabel">Pilih Metode Pembayaran<br>
                                                <p class="card-title-desc" id="offcanvasnop"></p>
                                                <p class="card-title-desc">Total Tagihan: <span class="bg-warning text-body" id="offcanvastotaltagih"></span></p>
                                                </h5>
                                                <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                                            </div>
                                            <div class="offcanvas-body">
                                                <div class="row">
                                                    <div class="card">
                                                        <div class="card-body">
                                                            <div class="accordion" id="accordionExample">
                                                                <div class="accordion-item">
                                                                    <h2 class="accordion-header" id="headingOne">
                                                                        <button class="accordion-button fw-medium collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                                                        <img src="../assets/images/tokopedia.png" alt="" height="24"> Tokopedia
                                                                        </button>
                                                                    </h2>
                                                                    <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                                                        <div class="accordion-body">
                                                                            <div class="text-muted">
                                                                                Berikut cara bayar Pajak Bumi Bangunan di Tokopedia:
                                                                                <ol style="text-align: justify;">
                                                                                    <li>Kunjungi laman Tokopedia &gt; <strong>PBB Online</strong> atau <a href="https://www.tokopedia.com/pajak/pbb/">klik Link ini</a></li>
                                                                                    <li>Masukan nomor objek Pajak Bumi Bangunan Anda.</li>
                                                                                    <li>Rincian akan otomatis muncul jika nomor objek pajak yang Anda masukan sudah benar.</li>
                                                                                    <li>Klik opsi Bayar.</li>
                                                                                    <li>Pilih metode pembayaran yang diinginkan.</li>
                                                                                    <li>Sistem akan segera memproses pembayaran Pajak Bumi Bangunan Anda dan mengirimkan notifikasi ketika pembayaran sukses dilakukan.</li>
                                                                                </ol>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="accordion-item">
                                                                    <h2 class="accordion-header" id="headingTwo">
                                                                        <button class="accordion-button fw-medium collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                                                        <img src="../assets/images/shopee.png" alt="" height="24">&nbsp;&nbsp;Shopee
                                                                        </button>
                                                                    </h2>
                                                                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                                                                        <div class="accordion-body">
                                                                            <div class="text-muted">
                                                                                Berikut cara bayar Pajak Bumi Bangunan di Shopee:
                                                                                <ol style="text-align: justify;">
                                                                                    <li>Kunjungi laman Shopee &gt; PBB atau <a href="https://shopee.co.id/produk-digital/lainnya">klik Link ini</a>.</li>
                                                                                    <li>Pada bagian Tagihan, klik <strong>PBB</strong></li>
                                                                                    <li>Cari dan pilih wilayah "<strong>PBB Kota Bekasi </strong>", pilih tahun pajak yang ingin dibayarkan, dan masukkan No. Objek Pajak (PBB). Pastikan data yang dimasukkan sudah sesuai.</li>
                                                                                    <li>Klik <strong>Lihat Tagihan</strong>.</li>
                                                                                    <li>Periksa tagihan yang tertera. Jika sudah sesuai, klik <strong>Checkout</strong> dan pilih metode pembayaran yang ingin digunakan, lalu klik <strong>Bayar Sekarang</strong>.</li>
                                                                                    <li>Sistem akan segera memproses pembayaran Pajak Bumi Bangunan Anda dan mengirimkan notifikasi ketika pembayaran sukses dilakukan.</li>
                                                                                </ol>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="accordion-item">
                                                                    <h2 class="accordion-header" id="headingThree">
                                                                        <button class="accordion-button fw-medium collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                                                        <img src="../assets/images/gojek.png" alt="" height="24">&nbsp;Gojek
                                                                        </button>
                                                                    </h2>
                                                                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                                                                        <div class="accordion-body">
                                                                            <div class="text-muted">
                                                                                Berikut cara bayar Pajak Bumi Bangunan di Gojek:
                                                                                <ol style="text-align: justify;">
                                                                                    <li>Buka aplikasi Gojek dan pilih <strong>Go Tagihan</strong> atau <a href="https://gojek.onelink.me/2351932542?pid=Go-Jek_Web&amp;c=BILLS%20Gotagihan&amp;af_channel=Organic&amp;af_adset=BILLS%20Gotagihan&amp;af_ad=BILLS%20Gotagihan&amp;is_retargeting=true&amp;af_click_lookback=7d&amp;af_dp=gojek://gobills&amp;af_web_dp=&amp;utm_source=Go-Jek_Web&amp;utm_medium=Referral&amp;utm_campaign=BILLS%20Gotagihan&amp;utm_term=BILLS%20Gotagihan&amp;utm_content=BILLS%20Gotagihan&amp;af_force_deeplink=true">klik Link ini</a></li>
                                                                                    <li>Pilih atau cari "<strong>PBB Kota Bekasi </strong>".</li>
                                                                                    <li>Masukan Nomor Objek Pajak dan Tahun.</li>
                                                                                    <li>Konfirmasi Pembayaran dan Masukkan PIN.</li>
                                                                                    <li>Tarik ke atas untuk lihat detail pembayaran melalui Go Tagihan.</li>
                                                                                    <li>Detail transaksi tersebut di atas dapat digunakan sebagai bukti pembayaran yang sah.</li>
                                                                                </ol>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="accordion-item">
                                                                    <h2 class="accordion-header" id="headingFour">
                                                                        <button class="accordion-button fw-medium collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                                                        <img src="../assets/images/indomaret.png" alt="" height="24">&nbsp;Indomaret
                                                                        </button>
                                                                    </h2>
                                                                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                                                                        <div class="accordion-body">
                                                                            <div class="text-muted">
                                                                                Berikut cara bayar Pajak Bumi Bangunan di Indomaret:
                                                                                <ol style="text-align: justify;">
                                                                                    <li>Kunjungi laman KlikIndomaret &gt; PBB Online atau <a href="https://virtual.klikindomaret.com/category/pbb">klik Link ini</a></li>
                                                                                    <li>Pilih Kota Kota Bekasi  dan Masukan nomor objek Pajak Bumi Bangunan Anda.</li>
                                                                                    <li>Rincian akan otomatis muncul jika nomor objek pajak yang Anda masukan sudah benar.</li>
                                                                                    <li>Pilih metode bayar PBB online.</li>
                                                                                    <li>Selesaikan Pembayaran.</li>
                                                                                    <li>Simpan struk sebagai bukti pembayaran.</li>
                                                                                </ol>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="accordion-item">
                                                                    <h2 class="accordion-header" id="headingNine">
                                                                        <button class="accordion-button fw-medium collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNine" aria-expanded="false" aria-controls="collapseNine">
                                                                        <img src="../assets/images/qris.png" alt="" height="24">&nbsp;QRIS
                                                                        </button>
                                                                    </h2>
                                                                    <div id="collapseNine" class="accordion-collapse collapse" aria-labelledby="headingNine" data-bs-parent="#accordionExample">
                                                                        <div class="accordion-body">
                                                                            <div class="text-muted">
                                                                                Berikut cara bayar Pajak Bumi Bangunan melalui QRIS:
                                                                                <ol style="text-align: justify;">
                                                                                    <li>Buka aplikasi Pembayaran / Mobile Banking apa saja.</a></li>
                                                                                    <li>Pastikan saldo anda cukup untuk melakukan pembayaran.</li>
                                                                                    <li>Silakan scan QRIS berikut untuk melakukan pembayaran, dengan batas waktu:<br> <blockquote class="blockquote fs-14"><span id="countdown"></span></blockquote><img id="imgqr" class="img-fluid img-thumbnail" src="#" alt="QR"><div class="alert alert-danger" style="letter-spacing: -1px;" role="alert"><strong><span id="notifuser">JANGAN TUTUP HALAMAN INI!</span></strong></div></li>
                                                                                    <li><strong>Sistem kami akan mendeteksi status pembayaran otomatis</strong> setelah anda melakukan transaksi QRIS di atas.</li>
                                                                                    <li>Simpan hasil transaksi anda sebagai bukti pembayaran yang sah.</li>
                                                                                    <li>Jika, terjadi kendala atas pembayaran anda silakan hubungi kami di <a href="mailto:bapenda.Kota Bekasi kab@gmail.com">bapenda.Kota Bekasi kab@gmail.com</a></li>
                                                                                </ol>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="accordion-item">
                                                                    <h2 class="accordion-header" id="headingTen">
                                                                        <button class="accordion-button fw-medium collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTen" aria-expanded="false" aria-controls="collapseTen">
                                                                        <img src="../assets/images/va.png" alt="" height="24">&nbsp;Virtual Account
                                                                        </button>
                                                                    </h2>
                                                                    <div id="collapseTen" class="accordion-collapse collapse" aria-labelledby="headingTen" data-bs-parent="#accordionExample">
                                                                        <div class="accordion-body">
                                                                            <div class="text-muted">
                                                                                Berikut cara bayar Pajak Bumi Bangunan melalui Virtual Account:
                                                                                <ol style="text-align: justify;">
                                                                                    <li>Buka aplikasi Pembayaran / Mobile Banking apa saja.</a></li>
                                                                                    <li>Pastikan saldo anda cukup untuk melakukan pembayaran.</li>
                                                                                    <li>Pilih Menu Transfer -> Bank Lain Dalam Negeri:<br>  
                                                                                    <div class="alert alert-danger" style="letter-spacing: -1px;" role="alert"><strong><span id="notifva"></span></strong></div></li>
                                                                                    <li><strong>Masukkan Kode Bank dan Nomor Virtual Account tujuan</strong> </li>
                                                                                    <li>Masukkan nominal yang harus dibayarkan.</li>
                                                                                    <li>Layar akan menunjukkan konfirmasi. Apabila telah sesuai, pilih Lanjutkan / Kirim.</li>
                                                                                    <li>Masukkan PIN transaksi.</li>
                                                                                    <li>Selesai.</li>
                                                                                </ol>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div><!-- end accordion -->
                                                        </div><!-- end card-body -->
                                                    </div><!-- end card -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- top offcanvas -->
                                    <div class="offcanvas offcanvas-top" tabindex="-1" id="offcanvasTop" aria-labelledby="offcanvasTopLabel" style="min-height:100vh;">
                                            <div class="offcanvas-header border-bottom">
                                                <h5 class="offcanvas-title" id="offcanvasTopLabel">Lihat Dokumen</h5>
                                                <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                                            </div>
                                            <div class="offcanvas-body">
                                                 <iframe id="pdf-js-viewer" src="3275061001001000105e14.pdf?nop=327506100100100010&amp;thn=2028" title="Document Viewer" frameborder="0" width="100%" height="100%"></iframe>
                                            </div>
                                        </div>
                                    <!-- end card body -->
                                </div>
                                <!-- end card -->
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->
                    </div> <!-- container-fluid -->
                </div>
                <!-- End Page-content -->
 
            </div>
            <!-- end main content-->

        </div>
      </div>
    </div>
     
  </section><!-- End Hero -->
  
  <footer id="footer">
    <div class="container d-md-flex py-4">
      <div class="me-md-auto text-center text-md-start">
        <div class="copyright">
          &copy; Copyright <strong><span>BAPENDA  Kota Bekasi </span></strong>. All Rights Reserved
        </div>
        <div class="credits">
           Designed by <a href="http://databumi.id/">Data Bumi Indonesia</a>
        </div>
      </div>
      <div class="social-links text-center text-md-right pt-3 pt-md-0">
        <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
        <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
        <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
        <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
        <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
      </div>
    </div>
  </footer> 

  <div id="preloader"></div>
  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <!-- <script   src="https://code.jquery.com/jquery-3.7.1.slim.js"   integrity="sha256-UgvvN8vBkgO0luPSUl2s8TIlOSYRoGFAX4jlCIm9Adc="   crossorigin="anonymous"></script> -->
  
  <script src="login/assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="login/assets/vendor/bootstrap/js/bootstrap.min.js"></script>
  <script src="login/assets/vendor/aos/aos.js"></script>
  <script src="login/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="login/assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="login/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="login/assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="login/assets/vendor/php-email-form/validate.js"></script>
  <script src="../assets/js/vendor.min.js"></script>
	<!-- <script src="http://esppt.bekasikota.go.id/esppt/views/login/assets/js/app.min.js"></script> -->

  <!-- Template Main JS File -->
  <script src="login/assets/js/main.js"></script>


  <script async src="https://www.googletagmanager.com/gtag/js?id=G-JSVKP246H1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JSVKP246H1');
</script>

        <!-- JAVASCRIPT -->
        <script src="../assets/plugins/jquery/dist/jquery.min.js"></script>
        <script src="../assets/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="../assets/bootstrap/js/imask.min.js"></script>
        <script src="../assets/bootstrap/plugins/sweetalert2/sweetalert2.min.js"></script>
        

        <!-- pace js -->
        <script src="../assets/plugins/pace-js/pace.min.js"></script>

        <!-- flatpickr js -->
        <script src="sinetron/assets/js/flatpickr.min.js"></script>
        <script src="../assets/plugins/datatables.net/js/jquery.dataTables.min.js"></script>
        <script src="../assets/plugins/datatables.net-bs5/js/dataTables.bootstrap5.min.js"></script>
        <script src="../assets/plugins/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
        <script src="../assets/plugins/datatables.net-responsive-bs5/js/responsive.bootstrap5.min.js"></script>
        <!-- jQuery BlockUI Plugin js -->
        <script src="sinetron/assets/js/jquery.blockUI.js"></script>
        <!-- <script src="http://esppt.bekasikota.go.id/esppt/views/sinetron/assets/js/app.js"></script> -->
 
<script type="text/javascript" language="javascript" class="init">
    jQuery(document).ready(function($) {
        //masking input 
		var mask = IMask(document.getElementById("usernop"), {
			mask: "00-00-000-000-000-0000-0"
		});

        var apipbb = [];
        var totaltagihpajak = 0;
        var amountqr = 0;
        var nop = '';
        var masa_pajak = '';
        var tahun = '';
        var desc    = "PBB Tahun "+ tahun;
        var jml  = jml;
        var denda   = denda;
        var name    = name;
        var client_ip = '';

        //DataTable Script
        var table = $("#datatable").DataTable({
            data: apipbb,
            order: [[0, 'desc']],
            columnDefs: [
                {
                    targets: [1,2,3,4,5],
                    orderable: false,
                },
            ],
            dom: '',
        });

        $('#datatable tbody').on( 'click', 'button', function () {
            var tr = $(this).closest('tr');

            if ( $(tr).hasClass('child') ) {
            tr = $(tr).prev();  
            }

            totaltagihpajak = $(this).data('totaltagih');
            amountqr = $(this).data('amountqr');
            masa_pajak = $(this).data('tahuntagih');
            // var data = table.row( tr ).data();
            // alert( data[0] +"'s salary is: "+ data[ 3 ] );
        } );

        $('#datatable tbody').on( 'click', '.btn-lihatdokumen', function (e) {
            var nm_file = $(this).data('nmfile');
            // alert(encodeURIComponent(nm_file));
            // console.log($('#pdf-js-viewer').attr('src'));
            // $('#pdf-js-viewer').attr('src', '/web/viewer.html?file='+encodeURIComponent(nm_file));
            $('#pdf-js-viewer').attr('src', nm_file);
        });

        //tombol Cek Sekarang
		$('#ceksekarang').on('click', function(){
            $('.datapajak').hide();
			var n = $('#usernop').val().length;
			if(n == 24){
                $('.datapajak').block({ message: null });

                $('div.ceknop').block({ 
                    message: '<h4>eSPPT KOTA BEKASI...</h4>', 
                    // message: '<div class="loader">eSPPT KOTA BEKASI...</div>',
                    css: { 
                        border: '3px solid #a00' } 
                });

                // $.getJSON("https://api.ipify.org/?format=json", function(e) {
                //     client_ip = e.ip;
                    getAPI();
                // });

				// $('.datapajak').fadeIn('slow');
			} else {
                Swal.fire({
                    title: "Nomor Objek Pajak (NOP) Belum Lengkap!",
                    confirmButtonColor: "#4267B2"
                });
				return false;
			}
		});

        $('#usernop').on("keypress", function(e) {
            if (e.keyCode == 13) {
                $('#ceksekarang').trigger('click');
            }
        });

        function getAPI(){
			nop = $('#usernop').val();
			$('#usernop_ph').text(nop);
            totaltagihpajak = 0;

            $.ajax({
				type: 'GET', 
				url: "http://esppt.bekasikota.go.id/esppt/controllers/_getCatatanPembayaran?aksi=payment&nop="+nop, 
				data: {}, 
				cache: false, 
                dataType: 'json',
				success: function (response) {
					var status_data = response.title;
					var x = response.data.length;
					var text = "";
                    apipbb = [];

					// Jika ada data dari API
					if (status_data == "Data Payment"){
						text += "<p>Nama Wajib Pajak : <strong>" + response.data[0].nm_wp + "</strong><br />";
						text += "Alamat Wajib Pajak : " + response.data[0].jln_wp + "<br />";
						text += "Alamat Objek Pajak <strong>: " + response.data[0].alamat_op + " " + response.data[0].blok_op + " RW: " + response.data[0].rw_op + " RT: " + response.data[0].rt_op + "</strong></p>";

                        text += '<footer id="unmasknop" class="blockquote-footer">NOP: '+mask.unmaskedValue+'</footer>';

                        $('#dataapi1').html(text);

						for (i = 0; i < x; i++) {
							var status_bayar = "";
							if(response.data[i].status_payment == 1){
                                render_tahun = "<span class='text-success'>"+response.data[i].thn_pajak+"</span>";
								status_bayar = "<span class='text-success'>LUNAS</span>";
                                keterangan = "Jumlah Bayar : <strong>Rp."+ response.data[i].jumlah_payment.toLocaleString() + "</strong>";
                                aksi = '<button class="btn btn-lihatdokumen btn-sm btn-success" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasTop" aria-controls="offcanvasTop" data-nmfile="http://esppt.bekasikota.go.id/esppt/views/cetak-skl?nop='+nop.replaceAll("-", "")+'&thn='+response.data[i].thn_pajak+'">Cetak STTS</button>';

                                // aksi = '<button class="btn btn-lihatdokumen btn-sm btn-success" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasTop" aria-controls="offcanvasTop" data-nmfile="https://epbb.Kota Bekasi kab.go.id/esppt/views/cetak_stts/single_payment_bill_print_pdf.php?nop='+nop.replaceAll("-", "")+'&thn='+response.data[i].thn_pajak+'">Cetak STTS</button>';
							} else if (response.data[i].status_payment == 0){
                                render_tahun = "<span class='text-danger'>"+response.data[i].thn_pajak+"</span>";
								status_bayar = "<span class='text-danger'>BELUM BAYAR</span><br></strong> (Jatuh Tempo: " + response.data[i].tgl_jatuh_tempo + ")</strong>";
                                keterangan = "<strong>Denda : <span class='bg-danger text-white'>&nbsp;Rp."+ response.data[i].denda.toLocaleString() + "&nbsp;</span>, Total Tagihan : <span class='bg-warning'>&nbsp;Rp."+ response.data[i].jumlah_payment.toLocaleString() + "&nbsp;</span></strong>";
                                aksi = '<button class="btn btn-metodebayar btn-sm btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" data-totaltagih="Rp.'+response.data[i].jumlah_payment.toLocaleString()+'" data-tahuntagih="'+response.data[i].thn_pajak+'" data-amountqr="'+response.data[i].jumlah_payment+'" aria-controls="offcanvasExample">Pilih Pembayaran</button>';
							}
							text += "<strong><span class='text-info'>" + response.data[i].thn_pajak + "</span></strong> : <strong>Rp." + response.data[i].pbb_pokok.toLocaleString() + "</strong> (Jatuh Tempo: " + response.data[i].tgl_jatuh_tempo + ") | Status: <strong>" + status_bayar + "</strong> | " + keterangan + "<hr />";

                            apipbb.push([render_tahun, 'Rp.'+response.data[i].pbb_pokok.toLocaleString(), 'Rp.'+response.data[i].denda.toLocaleString(), 'Rp.'+response.data[i].jumlah_payment.toLocaleString(), status_bayar, aksi]);
						}

                        $('.datapajak').fadeIn('slow');
                        $('.datapajak, .ceknop').unblock();

                        table.clear();
                        table.rows.add(apipbb);
                        table.responsive.rebuild();
                        table.responsive.recalc();
                        table.draw();

                        // $('.btn-metodebayar').on('click', function () {
                        //     alert($(this).data('totaltagih'));
                        //     totaltagihpajak = $(this).data('totaltagih');
                        // });
					} else { // jika data tidak ditemukan
                        Swal.fire({
                            title: "DATA ERROR!!",
                            confirmButtonColor: "#4267B2"
                        });
						//text += "DATA ERROR!!";
					}

                    //console.log(apipbb)
					//alert(text);
                },
				statusCode: {
					404: function() {
                        Swal.fire({
                            title: "Data Nomor Objek Pajak (NOP) Tidak Ditemukan!",
                            confirmButtonColor: "#4267B2"
                        });
						//alert("<strong>Data Nomor Objek Pajak (NOP) TIDAK DITEMUKAN!</strong>");
					}
				},
				error: function(){
                    Swal.fire({
                        title: "Mohon maaf, server sedang tidak dapat dijangkau!!<br /> Silakan mencoba beberapa saat lagi.",
                        confirmButtonColor: "#4267B2"
                    });                    
					//alert("<strong>MOHON MAAF SERVER SEDANG TIDAK DAPAT DIJANGKAU!<br />SILAHKAN MENCOBA BEBERAPA SAAT LAGI.</strong>");
				}
            });

		 
        }

        var pollingapibssb;

        $('#collapseNine').on('show.bs.collapse', function(){
            // alert('halocess');
			$.ajax({
				type: 'POST', 
				// url: "http://esppt.bekasikota.go.id/wp-content/plugins/page-templater/pakinta-admin-ajax-nologin.php", 
				url: "", 
				data: {
                    do: 'spec_api_qris_bssb_create',
                    object: mask.unmaskedValue,
                    masa_pajak: masa_pajak,
                    client_ip: client_ip,
                    nmid: '123356',
                    hashCode: 'qwerty',
                    amount: amountqr,
                    pajak: 'pbbp2'
                }, 
                crossDomain: true,
				cache: false, 
				success: function (response) {
                    console.log(response);
                    // alert(response.responseCode);
                    // $("#imgqr").attr("src","http://esppt.bekasikota.go.id/wp-content/plugins/page-templater//"+response.qrImage);
                    $("#imgqr").attr("src",""+response.qrImage);
                    document.getElementById("notifuser").innerHTML = "JANGAN TUTUP HALAMAN INI!"

                    if(response.qrImage == "assets/error-icon.html"){
                        document.getElementById("notifuser").innerHTML = "SERVER ERROR!!"
                    } else {
                        // checkQRISPayment(orderId, nop, masa_pajak, amountqr)
                        pollingapibssb = setInterval(checkQRISPayment, 7000, response.orderId, mask.unmaskedValue, masa_pajak, amountqr);
                    }

                    // Get server time and start the countdown
                    getServerTime(function(serverTime) {
                        // Set the end time for the countdown (replace this with your desired end time)
                        endTime = new Date(response.expiredDate).getTime();
                        // Add the server time to the calculated time difference
                        endTime += new Date(serverTime).getTime() - new Date().getTime();

                        // Update the countdown every second
                        setInterval(updateCountdown, 1000);

                        // Initial update
                        updateCountdown();
                    });
                }
            });
        });
        $('#collapseNine').on('hide.bs.collapse', function(){
            $("#imgqr").attr("src","");
            document.getElementById("countdown").innerHTML = "";
            clearInterval(pollingapibssb); // Clear the polling
        });

        $('#offcanvasExample').on('shown.bs.offcanvas', function () {
            $('#offcanvasnop').html($('#unmasknop').text()+" | Tahun: "+masa_pajak);
            $('#offcanvastotaltagih').html("<strong>"+totaltagihpajak+"</strong>");
        });

		$('#offcanvasExample').on('hidden.bs.offcanvas', function () {
			// alert('CLOSEEEE THE DOOR');
		});

		$('#offcanvasExample').on('hide.bs.offcanvas', function () {
            $('.collapse').collapse('hide');
            $("#imgqr").attr("src","");
		});

		$('#offcanvasTop').on('hidden.bs.offcanvas', function () {
			// alert('CLOSEEEE THE DOOR');
		});

		$('#offcanvasTop').on('hide.bs.offcanvas', function () {
            // alert('CLOSEEEE THE DOOR');
            // $('#pdf-js-viewer').attr('src', '/web/viewer.html?file='+encodeURIComponent(""));
		});

        $('#collapseTen').on('show.bs.collapse', function(){
            // alert('VA');
            nop = $('#unmasknop').text();
            tahun = masa_pajak;
			$.ajax({
				type: 'POST', 
				url: "http://103.75.150.23/API_VA/request_va", 
				data: {
                    nop: nop, 
                    tahun:tahun, 
                    name: name, 
                    jml: jml, 
                    denda: denda, 
                    desc : desc
                }, 
                crossDomain: true,
				cache: false, 
				success: function (response) {
                    console.log(response);

                    document.getElementById("notifva").innerHTML = "SERVER ERROR!!"

                    // document.getElementById("notifva").innerHTML = "VA Number:"+response.va_number+" Nominal: "+response.total_tagihan
 
                }
            });
        });

        // Function to get the server time
        function getServerTime(callback) {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                var serverTime = JSON.parse(xhr.responseText).serverTime;
                callback(serverTime);
                }
            };
            // xhr.open("GET", "http://esppt.bekasikota.go.id/getServerTime.php", true);
            xhr.open("GET.html", "", true);
            xhr.send();
        }

        // Set the target end time for the countdown (replace this with your desired end time)
        var endTime;

        // Function to update the countdown timer
        function updateCountdown() {
            var currentTime = new Date().getTime();
            var timeDifference = endTime - currentTime;

            // Calculate days, hours, minutes, and seconds
            var days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
            var hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((timeDifference % (1000 * 60)) / 1000);

            // Display the countdown
            // document.getElementById("countdown").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";
            document.getElementById("countdown").innerHTML = hours + " jam, " + minutes + " menit, " + seconds + " detik";

            // Check if the countdown has reached zero
            if (timeDifference <= 0) {
                document.getElementById("countdown").innerHTML = "QRIS expired!";
                // You can add additional logic here when the countdown expires
                // $("#imgqr").attr("src","http://esppt.bekasikota.go.id/wp-content/plugins/page-templater//assets/error-icon.png");
                $("#imgqr").attr("src","");
                document.getElementById("notifuser").innerHTML = "EXPIRED!!"
            }
        }

        // Function to check QR Status from BSSB
        function checkQRISPayment(orderId, nop, masa_pajak, amountqr) {
			$.ajax({
				type: 'POST', 
				// url: "http://esppt.bekasikota.go.id/wp-content/plugins/page-templater/pakinta-admin-ajax-nologin.php", 
				url: "", 
				data: {
                    do: 'spec_api_qris_bssb_check',
                    orderId: orderId,
                    object: nop,
                    masa_pajak: masa_pajak,
                    amount: amountqr,
                    client_ip: client_ip
                }, 
				cache: false, 
				success: function (response) {
                    console.log(response);
                    if(response.transactionStatus == "SUCCESS"){
                        Swal.fire({
                            title: "<strong>Pembayaran QRIS <u>Berhasil</u></strong>",
                            icon: "success",
                            html: `
                            <div><table style="margin-left: auto; margin-right: auto;">
                                <tbody class="fs-6 text" style="text-align: left;">
                                    <tr>
                                            <td>Order ID</td>
                                            <td>:</td>
                                            <td>`+response.orderId+`</td>
                                    </tr>
                                    <tr>
                                            <td>Waktu</td>
                                            <td>:</td>
                                            <td>`+response.transactionTime+`</td>
                                    </tr>
                                    <tr>
                                            <td>NOP</td>
                                            <td>:</td>
                                            <td>`+nop+`</td>
                                    </tr>
                                    <tr>
                                            <td>Masa Pajak</td>
                                            <td>:</td>
                                            <td>`+masa_pajak+`</td>
                                    </tr>
                                    <tr>
                                            <td>Total Bayar</td>
                                            <td>:</td>
                                            <td>`+totaltagihpajak+`</td>
                                    </tr>
                                    <tr>
                                            <td>Kode Pengesahan</td>
                                            <td>:</td>
                                            <td>`+response.KodePengesahan+`</td>
                                    </tr>
                                    <tr>
                                            <td>Status</td>
                                            <td>:</td>
                                            <td>`+response.transactionStatus+`</td>
                                    </tr>
                                </tbody>
                            </table></div>
                            `,
                            showCloseButton: true,
                            focusConfirm: true,
                            confirmButtonText: `
                                <i class="fa fa-thumbs-up"></i> Great!
                            `,
                            confirmButtonColor: "#3085d6",
                            confirmButtonAriaLabel: "Thumbs up, great!",
                        });
                        $('#ceksekarang').click();
                        clearInterval(pollingapibssb);
                    }
                }
            });
        }


    });
</script>

  <script type="text/javascript">
 
    // if (formOpenBtn !== undefined && formOpenBtn !== null) {
    // // Now we know that foo is defined, we are good to go.
    // formOpenBtn.addEventListener("click", () => hero.classList.add("show"));
    // formCloseBtn.addEventListener("click", () => hero.classList.remove("show"));
    // }

   (function($) {
		$(document).ready(function() {
			const Toast = Swal.mixin({
				toast: true,
				position: 'top-end',
				showConfirmButton: false,
				timer: 13000,
				timerProgressBar: true,
				didOpen: (toast) => {
					toast.addEventListener('mouseenter', Swal.stopTimer)
					toast.addEventListener('mouseleave', Swal.resumeTimer)
				}
			});
			
			const btnLogin = $('._login');
			var username = $('._user');
			var password = $('._pass');

			btnLogin.on('click', function() {
				if (username.val() == '' || password.val() == '') {
					// alert("Masukkan username dan password anda!");
					Toast.fire({
						icon: 'error',
						title: 'Masukkan username dan password anda!'
					});
					username.focus();
					return false;
				}
			});
		});

		$(document).ready(function() {

			var $login_form = $('#login-form'),
				$sppt_form = $('#search-sppt-form'),
				$btnLogin = $('#login-btn'),
				$loadImg = "<img src='assets/images/ajax-loaders/ajax-loader-1.html'/>";

			testExp = new RegExp('Android|webOS|iPhone|iPad|' +
				'BlackBerry|Windows Phone|' +
				'Opera Mini|IEMobile|Mobile',
				'i');
			//console.log(testExp)

			var is_mobile = testExp.test(navigator.userAgent);

			$sppt_form.submit(function() {
				$.ajax({
					type: 'POST',
					url: $sppt_form.attr('action') + '?mobile=' + (is_mobile ? '1' : '0'),
					data: $sppt_form.serialize(),
					beforeSend: function() {
						$('#search-sppt-loader').show();
					},
					success: function(data) {
						$('#search-sppt-content').html(data);
					},
					complete: function() {
						$('#search-sppt-loader').hide();
					}
				});
				return false;
			});
 

		});

	})(jQuery);
  </script>

</body>


<!-- Mirrored from esppt.bekasikota.go.id/esppt/views/pbbpay by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 11 Feb 2025 06:48:22 GMT -->
</html>